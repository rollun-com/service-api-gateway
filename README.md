# service-api-gateway
---

## Api Gateway
Сервис который проксирует через себя все запросы к api,
 и перенаправляет их в конкретные сервисы.
[Более детально о патерне микросервисной архитектуры - api-gateway](http://microservices.io/patterns/apigateway.html)

Все внутренние сервисы, общаются между собой исключительно через api-gateway.
  Используя указанный ниже протокол общения.

## Принцип работы

Маска запроса `/{services}/{send_path}`
> Поддерживаемый типы запроса - все согласно стандарта http
* services - имя сервиса в который будет передан запрос
* send_path - путь по которому будет отправлен запрос в сервис

Пример
Допустим мы отправим запрос на api-gateway.
```
GET
http://api-gateway/amazon-store/api/webhook/withdraw?asin="AAAAAAAA"&sku="AA-AAA-AAA"
```
Он в свою очередь, примет это запрос, разберет его и переотправит на сервис с именем `amazon-store`.
Допустим, у нас есть конфиг соответсвия.
```
amazon-store: 192.168.122.23
ebay-store: 192.168.123.23
```
Тогда имени `amazon-store` будет соответсвовать ip `192.168.122.23`.
Переотправленый запрос будет выглядеть
```
GET
http://192.168.122.23/api/webhook/withdraw?asin="AAAAAAAA"&sku="AA-AAA-AAA"
```

После того как запрос отработает, **api-gateway** вернет ответ.
